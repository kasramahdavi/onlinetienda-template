var rankscience_loaded=!1;!function(){var script_version=22,script_last_update="2020-9-9 14:39:4",use_query_params=0,enhancements=[{filter:{active:1,enhancement_id:4054,id:4065,name:"",type:"prefix",value:"/free-icon/"},id:4054,name:"Detail",recipes:[{active:1,enhancement_id:4054,id:5113,instructions:[],name:"Control",position:0,weight:1},{active:1,enhancement_id:4054,id:5114,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T05:21:22.000Z",id:13147,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5114,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-06T05:31:43.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{detail_name}} - Free {{pack_name}} icons' ) = {{original title}}",created_at:"2020-08-06T05:21:22.000Z",id:13148,ins_value:null,method:"",name:"",pattern:"{{detail_name}} - Free {{pack_name}} icons",position:1,recipe_id:5114,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-06T05:31:43.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{icon_detail_title_1}} = set( 'Free {{detail_name}} icon | Flaticon' )",created_at:"2020-08-06T05:21:22.000Z",id:13149,ins_value:null,method:"",name:"",pattern:"Free {{detail_name}} icon | Flaticon",position:2,recipe_id:5114,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-06T05:31:43.000Z",value:"",workspace_input_key:"",workspace_output_key:"icon_detail_title_1"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{icon_detail_title_1}}",created_at:"2020-08-06T05:21:22.000Z",id:13150,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5114,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-06T05:31:43.000Z",value:"",workspace_input_key:"icon_detail_title_1",workspace_output_key:""}],name:"Recipe A",position:1,weight:1},{active:1,enhancement_id:4054,id:5117,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T05:28:05.000Z",id:13159,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5117,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-06T05:31:43.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{detail_name}} - Free {{pack_name}} icons' ) = {{original title}}",created_at:"2020-08-06T05:28:05.000Z",id:13160,ins_value:null,method:"",name:"",pattern:"{{detail_name}} - Free {{pack_name}} icons",position:1,recipe_id:5117,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-06T05:31:43.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{icon_detail_title_2}} = set( '{{detail_name}} icon | Free Download' )",created_at:"2020-08-06T05:28:05.000Z",id:13161,ins_value:null,method:"",name:"",pattern:"{{detail_name}} icon | Free Download",position:2,recipe_id:5117,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-06T05:31:43.000Z",value:"",workspace_input_key:"",workspace_output_key:"icon_detail_title_2"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{icon_detail_title_2}}",created_at:"2020-08-06T05:28:05.000Z",id:13162,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5117,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-06T05:31:43.000Z",value:"",workspace_input_key:"icon_detail_title_2",workspace_output_key:""}],name:"Recipe B",position:2,weight:1}],site_id:600,status:"Inactive"},{filter:{active:1,enhancement_id:4058,id:4069,name:"",type:"prefix",value:"/free-icons/"},id:4058,name:"Tag (EN) - Flaticon",recipes:[{active:1,enhancement_id:4058,id:5138,instructions:[],name:"Control",position:0,weight:1},{active:1,enhancement_id:4058,id:5139,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T07:04:43.000Z",id:13249,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5139,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{tag_title}} Icons - {{resources}} free vector icons' ) = {{original title}}",created_at:"2020-08-06T07:04:43.000Z",id:13250,ins_value:null,method:"",name:"",pattern:"{{tag_title}} Icons - {{resources}} free vector icons",position:1,recipe_id:5139,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{tag_title_1}} = set( 'Free {{tag_title}} Icons' )",created_at:"2020-08-06T07:04:43.000Z",id:13251,ins_value:null,method:"",name:"",pattern:"Free {{tag_title}} Icons",position:2,recipe_id:5139,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"",workspace_output_key:"tag_title_1"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{tag_title_1}}",created_at:"2020-08-06T07:04:43.000Z",id:13252,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5139,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"tag_title_1",workspace_output_key:""}],name:"Recipe A",position:1,weight:1},{active:1,enhancement_id:4058,id:5140,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T07:04:43.000Z",id:13253,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5140,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{tag_title}} Icons - {{resources}} free vector icons' ) = {{original title}}",created_at:"2020-08-06T07:04:43.000Z",id:13254,ins_value:null,method:"",name:"",pattern:"{{tag_title}} Icons - {{resources}} free vector icons",position:1,recipe_id:5140,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{tag_title_2}} = set( 'The most downloaded {{tag_title}} icons from August' )",created_at:"2020-08-06T07:04:43.000Z",id:13255,ins_value:null,method:"",name:"",pattern:"The most downloaded {{tag_title}} icons from August",position:2,recipe_id:5140,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"",workspace_output_key:"tag_title_2"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{tag_title_2}}",created_at:"2020-08-06T07:04:43.000Z",id:13256,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5140,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"tag_title_2",workspace_output_key:""}],name:"Recipe B",position:2,weight:1},{active:1,enhancement_id:4058,id:5143,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T07:11:37.000Z",id:13269,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5143,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{tag_title}} Icons - {{resources}} free vector icons' ) = {{original title}}",created_at:"2020-08-06T07:11:37.000Z",id:13270,ins_value:null,method:"",name:"",pattern:"{{tag_title}} Icons - {{resources}} free vector icons",position:1,recipe_id:5143,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{tag_title_3}} = set( 'Free {{resources}} {{tag_title}} Icons' )",created_at:"2020-08-06T07:11:37.000Z",id:13271,ins_value:null,method:"",name:"",pattern:"Free {{resources}} {{tag_title}} Icons",position:2,recipe_id:5143,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"",workspace_output_key:"tag_title_3"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{tag_title_3}}",created_at:"2020-08-06T07:11:37.000Z",id:13272,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5143,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"tag_title_3",workspace_output_key:""}],name:"Recipe C",position:3,weight:1},{active:1,enhancement_id:4058,id:5144,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T07:11:37.000Z",id:13273,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5144,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{tag_title}} Icons - {{resources}} free vector icons' ) = {{original title}}",created_at:"2020-08-06T07:11:37.000Z",id:13274,ins_value:null,method:"",name:"",pattern:"{{tag_title}} Icons - {{resources}} free vector icons",position:1,recipe_id:5144,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{tag_title_4}} = set( '{{resources}} {{tag_title}} Icons | Free Download' )",created_at:"2020-08-06T07:11:37.000Z",id:13275,ins_value:null,method:"",name:"",pattern:"{{resources}} {{tag_title}} Icons | Free Download",position:2,recipe_id:5144,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"",workspace_output_key:"tag_title_4"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{tag_title_4}}",created_at:"2020-08-06T07:11:37.000Z",id:13276,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5144,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-14T07:58:48.000Z",value:"",workspace_input_key:"tag_title_4",workspace_output_key:""}],name:"Recipe D",position:4,weight:1}],site_id:600,status:"Inactive"},{filter:{active:1,enhancement_id:4059,id:4070,name:"",type:"prefix",value:"/packs/"},id:4059,name:"Packs (EN) - Flaticon",recipes:[{active:1,enhancement_id:4059,id:5145,instructions:[],name:"Control",position:0,weight:1},{active:1,enhancement_id:4059,id:5146,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T07:12:42.000Z",id:13277,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5146,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{pack_title}} {{resources_pack}} free icons (SVG, EPS, PSD, PNG files)' ) = {{original title}}",created_at:"2020-08-06T07:12:42.000Z",id:13278,ins_value:null,method:"",name:"",pattern:"{{pack_title}} {{resources_pack}} free icons (SVG, EPS, PSD, PNG files)",position:1,recipe_id:5146,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{pack_title_1}} = set( 'Free {{pack_title}} icons pack' )",created_at:"2020-08-06T07:12:42.000Z",id:13279,ins_value:null,method:"",name:"",pattern:"Free {{pack_title}} icons pack",position:2,recipe_id:5146,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"",workspace_output_key:"pack_title_1"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{pack_title_1}}",created_at:"2020-08-06T07:12:42.000Z",id:13280,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5146,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"pack_title_1",workspace_output_key:""}],name:"Recipe A",position:1,weight:1},{active:1,enhancement_id:4059,id:5150,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T07:18:08.000Z",id:13293,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5150,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{pack_title}} {{resources_pack}} free icons (SVG, EPS, PSD, PNG files)' ) = {{original title}}",created_at:"2020-08-06T07:18:08.000Z",id:13294,ins_value:null,method:"",name:"",pattern:"{{pack_title}} {{resources_pack}} free icons (SVG, EPS, PSD, PNG files)",position:1,recipe_id:5150,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{pack_title_2}} = set( 'Download {{pack_title}} icons pack' )",created_at:"2020-08-06T07:18:08.000Z",id:13295,ins_value:null,method:"",name:"",pattern:"Download {{pack_title}} icons pack",position:2,recipe_id:5150,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"",workspace_output_key:"pack_title_2"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{pack_title_2}}",created_at:"2020-08-06T07:18:08.000Z",id:13296,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5150,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"pack_title_2",workspace_output_key:""}],name:"Recipe B",position:2,weight:1},{active:1,enhancement_id:4059,id:5151,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T07:18:08.000Z",id:13297,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5151,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{pack_title}} {{resources_pack}} free icons (SVG, EPS, PSD, PNG files)' ) = {{original title}}",created_at:"2020-08-06T07:18:08.000Z",id:13298,ins_value:null,method:"",name:"",pattern:"{{pack_title}} {{resources_pack}} free icons (SVG, EPS, PSD, PNG files)",position:1,recipe_id:5151,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{pack_title_3}} = set( '{{resources_pack}} {{pack_title}} icons | Free Download' )",created_at:"2020-08-06T07:18:08.000Z",id:13299,ins_value:null,method:"",name:"",pattern:"{{resources_pack}} {{pack_title}} icons | Free Download",position:2,recipe_id:5151,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"",workspace_output_key:"pack_title_3"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{pack_title_3}}",created_at:"2020-08-06T07:18:08.000Z",id:13300,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5151,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"pack_title_3",workspace_output_key:""}],name:"Recipe C",position:3,weight:1},{active:1,enhancement_id:4059,id:5152,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T07:18:08.000Z",id:13301,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5152,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{pack_title}} {{resources_pack}} free icons (SVG, EPS, PSD, PNG files)' ) = {{original title}}",created_at:"2020-08-06T07:18:08.000Z",id:13302,ins_value:null,method:"",name:"",pattern:"{{pack_title}} {{resources_pack}} free icons (SVG, EPS, PSD, PNG files)",position:1,recipe_id:5152,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{pack_title_4}} = set( '{{resources_pack}} free {{pack_title}} icons' )",created_at:"2020-08-06T07:18:08.000Z",id:13303,ins_value:null,method:"",name:"",pattern:"{{resources_pack}} free {{pack_title}} icons",position:2,recipe_id:5152,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"",workspace_output_key:"pack_title_4"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{pack_title_4}}",created_at:"2020-08-06T07:18:08.000Z",id:13304,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5152,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-17T08:35:56.000Z",value:"",workspace_input_key:"pack_title_4",workspace_output_key:""}],name:"Recipe D",position:4,weight:1}],site_id:600,status:"Inactive"}];function paint(middleware,enhancements){function isValidEnhancement(e){const t=e.getCurrentPath(),a=e.getRsParams();function i(i){if(!t){e.logError("CurrentPath is not set","rs-path-empty");return!1}if(a["rs-deactivate"]&&"all"==a["rs-deactivate"]){const t="All enhancements were disabled with ?rs-deactivate=all";e.logError(t,"rs-deactivate");return!1}if("Active"!==i.status&&!a["rs-test"]&&!a["rs-recipe"]){a["rs-verbose"]&&"true"==a["rs-verbose"]&&e.logError("Skipping inactive enhancement "+i.id,"rs-skip "+i.id);return!1}var n=i.filter;switch(n.type){case"exact_match":return t===n.value;case"prefix":return t.substr(0,n.value.length)===n.value;case"list":return n.value.split("|").indexOf(t)>=0;case"regex":var o=!0;try{new RegExp(String(n.value))}catch(t){e.logError(t.toString(),"rs-test bad regex");o=!1}if(!o)return!1;try{r=new RegExp(String(n.value));return t.match(r)}catch(t){e.logError(t.toString(),"rs-test bad regex");return!1}default:return!1}}return a["rs-test"]?function(t){if(Number(t.id)===Number(a["rs-test"])&&i(t)){e.logError("Enhancement with id "+String(t.id)+" currently being tested with `?rs-test`.","announce rs-test");return!0}return!1}:a["rs-recipe"]?function(t){var r=!1;t.recipes&&t.recipes.length>0&&t.recipes.forEach(function(e){Number(e.id)===Number(a["rs-recipe"])&&(r=!0)});if(r&&i(t)){e.logError("Recipe with id "+a["rs-recipe"]+" currently being tested with `?rs-recipe`.","announce rs-recipe");return!0}return!1}:i}function chooseInstructionSequence(e){return function(t){return e.chooseInstructionSequence(t,e.getCurrentPath())}}function getWorkspaceInputKey(ws,key){var name=key,toWrite=ws[key];if(!toWrite){var func=!1,arr=name.split("."),len=arr.length;if(!(len>1))throw"RS-MissingWorkspaceItemError: no item named `"+key+"` in workspace.";name=arr[0];func=arr.slice(1,len).join(".");if(func){toWrite=ws[name];if(!toWrite)throw"RS-MissingWorkspaceItemError: no item named `"+name+"` in workspace.";try{toWrite=eval("toWrite."+func)}catch(e){throw"RS-UnknownWorkspaceFunctionError: "+e.message}}}return toWrite}function setWorkspaceOutputKey(e,t,r){if(!t)throw"RS-MissingWorkspaceItemError: no workspace item defined.";e[t]=r}function chooseInstructionExecutor(e){switch(e.type){case"take-constant--passthru--put-dom":return function(e,t,r){e.setHtml(r,r.value);return t};case"take-workspace--passthru--put-dom":return function(e,t,r){var a=getWorkspaceInputKey(t,r.workspace_input_key);e.setHtml(r,a);return t};case"take-dom--passthru--put-workspace":return function(e,t,r){var a=e.getHtml(r);setWorkspaceOutputKey(t,r.workspace_output_key,a);return t};case"take-workspace--extract-with-pattern--put-workspace":return function(e,t,r){var a=getWorkspaceInputKey(t,r.workspace_input_key),i=r.pattern.replace(/{{/g,"e0cd4aa7d36323291836aed2ba1a2f35").replace(/}}/g,"67c0904ef67556c8b54cfb9c83f28bea").replace(/<OR>/g,"b55206ef52e0848c6f2dc05665617216").replace(/[-^[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace(/e0cd4aa7d36323291836aed2ba1a2f35/g,"{{").replace(/67c0904ef67556c8b54cfb9c83f28bea/g,"}}").replace(/b55206ef52e0848c6f2dc05665617216/g,"|").replace(/{{.+?}}/g,"([\\s\\S]+)").replace(/\\ /g,"\\s+"),n=a.match(i);if(!n)throw"RS-WorkspaceExtractPatternError: pattern `"+r.pattern+"` does not match workspace item `"+r.workspace_input_key+"` with value `"+a+"`.";var o=r.pattern.match(/{{.+?}}/g);o&&o.length>0&&o.forEach(function(e,r){var a=e.slice(2,e.length-2).trim();void 0===n[r+1]?setWorkspaceOutputKey(t,a,""):setWorkspaceOutputKey(t,a,n[r+1])});return t};case"take-workspace--set-with-pattern--put-workspace":return function(e,t,r){var a=r.pattern.match(/{{.+?}}/g);if(a&&a.length>0){a.forEach(function(e){var a=e.slice(2,e.length-2).trim();a.indexOf("?")>0&&(a=a.split("?")[0]);try{getWorkspaceInputKey(t,a)}catch(e){if(void 0===t[a])throw e+" substituting in pattern `"+r.pattern}});var i=a.reduce(function(e,r){var a,i=r.slice(2,r.length-2).trim();if(i.indexOf("?")>0){let e=i.split("?");a=(a=getWorkspaceInputKey(t,e[0]))?e[1]:""}else a=getWorkspaceInputKey(t,i);return e.replace(r,a)},r.pattern);setWorkspaceOutputKey(t,r.workspace_output_key,i)}else setWorkspaceOutputKey(t,r.workspace_output_key,r.pattern);return t};case"take-workspace--set-with-pattern--put-schema":return function(e,t,r){var a=r.pattern.match(/{{.+?}}/g);if(a&&a.length>0){a.forEach(function(e){var a=e.slice(2,e.length-2).trim();a.indexOf("?")>0&&(a=a.split("?")[0]);try{getWorkspaceInputKey(t,a)}catch(e){if(void 0===t[a])throw e+" substituting in pattern `"+r.pattern}});var i=a.reduce(function(e,r){var a,i=r.slice(2,r.length-2).trim();if(i.indexOf("?")>0){let e=i.split("?");a=(a=getWorkspaceInputKey(t,e[0]))?e[1]:""}else a=getWorkspaceInputKey(t,i);return e.replace(r,a)},r.pattern)}else i=r.pattern;let n=document.createElement("script");n.type="application/ld+json";n.text=i;document.querySelector("head").appendChild(n);return t};case"take-workspace--titlecase--put-workspace":return function(e,t,r){var a=getWorkspaceInputKey(t,r.workspace_input_key).split(" ").map(function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}).join(" ");setWorkspaceOutputKey(t,r.workspace_output_key,a);return t};case"take-dom--prepend-with-workspace--put-dom":return function(e,t,r){var a=e.getHtml(r),i=getWorkspaceInputKey(t,r.workspace_input_key)+a;e.setHtml(r,i);return t};case"take-dom--append-with-workspace--put-dom":return function(e,t,r){var a=e.getHtml(r)+getWorkspaceInputKey(t,r.workspace_input_key);e.setHtml(r,a);return t};default:throw"RS-UnknownInstructionType: received unknown instruction type `"+e.type+"`."}}function runInstruction(e,t){const r=e.getRsParams();return function(a){r["rs-verbose"]&&"true"==r["rs-verbose"]&&e.logError("Running instruction "+(a.position+1)+" "+a.code);var i=chooseInstructionExecutor(a)(e,t,a);t=i}}function runInstructionSequence(e){return function(t){try{if(t&&t.length>0){t.sort(function(e,t){return e.position-t.position});t.forEach(runInstruction(e,{}))}}catch(t){e.logError(t,t)}}}var validEnhancements=enhancements.filter(isValidEnhancement(middleware)),rsTest=middleware.getRsParams()["rs-test"],userInputtedBadId=0==validEnhancements.length&&rsTest;if(userInputtedBadId){var testEnhancements=enhancements.filter(function(e){return Number(e.id)===Number(rsTest)}),realEnhancementButWrongPath=testEnhancements.length>0;if(realEnhancementButWrongPath){var e=testEnhancements[0];middleware.logError("RS-Error: Enhancement with id "+rsTest+" isn't configured to run on this page. If this is not correct behavior, double check your enhancement's filter.","rs-test picked wrong id");middleware.logError("Filter type:  "+e.filter.type,"rs-test bad filter type");middleware.logError("Filter value: "+e.filter.value,"rs-test bad filter value");middleware.logError("Current path: "+middleware.getCurrentPath(),"rs-test bad filter curr path")}else middleware.logError("RS-Error: An enhancement with id `"+rsTest+"` does not exist. Double check the id in your rs=test=<id> request.","bad user input for rs-test")}try{var chosenInstructionSequences=validEnhancements.map(chooseInstructionSequence(middleware));chosenInstructionSequences.forEach(runInstructionSequence(middleware))}catch(e){middleware.logError(e,e)}}function makeMiddleware(){function e(){var e=window.location.pathname,t="",r=!1;if(window.location.search){var a=window.location.search.slice(1);try{a=decodeURI(window.location.search.slice(1))}catch(e){a=window.location.search.slice(1)}for(var i,n=a.split("&"),c=[];i=n.shift();)if(0!==i.indexOf("rs-"))c.push(i);else if("rs-verbose"==i){r=!0;o("RankScience Script Version: "+script_version+" "+script_last_update,"rs-version")}c.length>0&&(t="?"+c.join("&"))}try{e=use_query_params?decodeURIComponent(window.location.pathname)+t:decodeURIComponent(window.location.pathname)}catch(a){e=use_query_params?window.location.pathname+t:window.location.pathname;r&&o("RS Error decoding URI: "+e,"rs-pathname")}r&&o("RS pathname URI: "+e,"rs-pathname");return e}function t(){if(!window.location.search)return{};var e="";try{e=decodeURI(window.location.search.slice(1))}catch(t){e=window.location.search.slice(1)}for(var t,r=e.split("&"),a=[];t=r.shift();)if(0===t.indexOf("rs-")){var i=t.split("=");2==i.length?a[i[0]]=i[1]:a[i[0]]="true"}return a}var r={};var a,i=(a=[],{register:function(e){a.indexOf(e)>-1||a.push(e)},shouldRepaint:function(e){var t=a.indexOf(e.target);if(t>-1){a.splice(t,1);return!1}var r=Array.prototype.slice.call(e.removedNodes).filter(function(e){return a.indexOf(e)>-1});if(r.length>0){r.forEach(function(e){var t=a.indexOf(e);a.splice(t,1)});return!1}return!0}});var n=[];function o(e,r){const a=t();if(a["rs-verbose"]&&"true"==a["rs-verbose"]||a["rs-test"]||a["rs-deactivate"]||a["rs-recipe"]){if(r&&n.indexOf(r)>-1)return;n.push(r);console.log(e)}}return{getCurrentPath:window.__rsOverrides__&&window.__rsOverrides__.getPath?window.__rsOverrides__.getPath:e,chooseInstructionSequence:function(e,r){const a=t();if(a["rs-recipe"]){const t=a["rs-recipe"],r=e.recipes.map(function(e){return e.id.toString()});if(-1===r.indexOf(t))throw"RS-Error: Recipe with id `"+t+"` does not exist. Double check the id in your rs=recipe=<id> request.";a["rs-verbose"]&&o(e.recipes[r.indexOf(t)].name+" from enhancement "+e.id+" currently being executed",e.id+" match recipe");return e.recipes[r.indexOf(t)].instructions}var i=getAssignment(e.id,e.recipes,r);a["rs-verbose"]&&o(e.recipes[i].name+" from enhancement "+e.id+" currently being executed",e.id+" match recipe");return e.recipes[i].instructions},setHtml:function(e,t){var r=e.selector.split("<OR>"),a=null;for(index in r)if(a=document.querySelector(r[index]))break;if(null===a)throw"RS-MissingHtmlElementError: can't find element with selector `"+e.selector+"`.";function n(e,t){o("Value before enhancement: "+e,"rs-test before");o("Value after enhancement:  "+t,"rs-test after")}i.register(a);switch(e.method){case"Inner Text":n(a.textContent,t);return a.textContent=t;case"Outer HTML":n(a.outerHTML,t);return a.outerHTML=t;case"Attribute":if(!e.attr_key)throw"RS-MissingAttributeKeyError: A `method` of `Attribute` requires an `attr_key`.";n(a.getAttribute(e.attr_key),t);return a.setAttribute(e.attr_key,t);default:throw"RS-UnknownSetMethod: method `"+e.method+"` not recognized."}},getHtml:function(t){var a=t.selector.split("<OR>"),i=null;for(index in a)if(i=document.querySelector(a[index]))break;if(null===i)throw"RS-MissingHtmlElementError: can't find element with selector `"+t.selector+"`.";var n=e()+":"+t.selector+":"+t.method+":"+t.attr_key;if(r[n])return r[n];switch(t.method){case"Inner Text":r[n]=i.textContent;return i.textContent;case"Outer HTML":r[n]=i.outerHTML;return i.outerHTML;case"Attribute":if(!t.attr_key)throw"RS-MissingAttributeKeyError: A `method` of `Attribute` requires an `attr_key`.";var o=i.getAttribute(t.attr_key);if(o){r[n]=o;return o}throw"RS-MissingAttributeError: Can't find attribute `"+t.attr_key+"` on element with selector `"+t.selector+"`.";default:throw"RS-UnknownExtractionMethod: method `"+t.method+"` not recognized."}},registerPainter:function(e){var t,r=(t=e,function(){if(void 0!==this.alreadyReceivedPaintRequest){this.alreadyReceivedPaintRequest=!0;requestAnimationFrame(function(){t()})}});new MutationObserver(function(e){e.forEach(function(e){i.shouldRepaint(e)&&r()})}).observe(document,{childList:!0,subtree:!0,attributes:!0})},logError:o,getRsParams:t}}function getAssignment(e,t,r){function a(e,t){var r=e[0],a=e[1],i=e[2],u=e[3];a=s(a=s(a=s(a=s(a=c(a=c(a=c(a=c(a=o(a=o(a=o(a=o(a=n(a=n(a=n(a=n(a,i=n(i,u=n(u,r=n(r,a,i,u,t[0],7,-680876936),a,i,t[1],12,-389564586),r,a,t[2],17,606105819),u,r,t[3],22,-1044525330),i=n(i,u=n(u,r=n(r,a,i,u,t[4],7,-176418897),a,i,t[5],12,1200080426),r,a,t[6],17,-1473231341),u,r,t[7],22,-45705983),i=n(i,u=n(u,r=n(r,a,i,u,t[8],7,1770035416),a,i,t[9],12,-1958414417),r,a,t[10],17,-42063),u,r,t[11],22,-1990404162),i=n(i,u=n(u,r=n(r,a,i,u,t[12],7,1804603682),a,i,t[13],12,-40341101),r,a,t[14],17,-1502002290),u,r,t[15],22,1236535329),i=o(i,u=o(u,r=o(r,a,i,u,t[1],5,-165796510),a,i,t[6],9,-1069501632),r,a,t[11],14,643717713),u,r,t[0],20,-373897302),i=o(i,u=o(u,r=o(r,a,i,u,t[5],5,-701558691),a,i,t[10],9,38016083),r,a,t[15],14,-660478335),u,r,t[4],20,-405537848),i=o(i,u=o(u,r=o(r,a,i,u,t[9],5,568446438),a,i,t[14],9,-1019803690),r,a,t[3],14,-187363961),u,r,t[8],20,1163531501),i=o(i,u=o(u,r=o(r,a,i,u,t[13],5,-1444681467),a,i,t[2],9,-51403784),r,a,t[7],14,1735328473),u,r,t[12],20,-1926607734),i=c(i,u=c(u,r=c(r,a,i,u,t[5],4,-378558),a,i,t[8],11,-2022574463),r,a,t[11],16,1839030562),u,r,t[14],23,-35309556),i=c(i,u=c(u,r=c(r,a,i,u,t[1],4,-1530992060),a,i,t[4],11,1272893353),r,a,t[7],16,-155497632),u,r,t[10],23,-1094730640),i=c(i,u=c(u,r=c(r,a,i,u,t[13],4,681279174),a,i,t[0],11,-358537222),r,a,t[3],16,-722521979),u,r,t[6],23,76029189),i=c(i,u=c(u,r=c(r,a,i,u,t[9],4,-640364487),a,i,t[12],11,-421815835),r,a,t[15],16,530742520),u,r,t[2],23,-995338651),i=s(i,u=s(u,r=s(r,a,i,u,t[0],6,-198630844),a,i,t[7],10,1126891415),r,a,t[14],15,-1416354905),u,r,t[5],21,-57434055),i=s(i,u=s(u,r=s(r,a,i,u,t[12],6,1700485571),a,i,t[3],10,-1894986606),r,a,t[10],15,-1051523),u,r,t[1],21,-2054922799),i=s(i,u=s(u,r=s(r,a,i,u,t[8],6,1873313359),a,i,t[15],10,-30611744),r,a,t[6],15,-1560198380),u,r,t[13],21,1309151649),i=s(i,u=s(u,r=s(r,a,i,u,t[4],6,-145523070),a,i,t[11],10,-1120210379),r,a,t[2],15,718787259),u,r,t[9],21,-343485551);e[0]=d(r,e[0]);e[1]=d(a,e[1]);e[2]=d(i,e[2]);e[3]=d(u,e[3])}function i(e,t,r,a,i,n){t=d(d(t,e),d(a,n));return d(t<<i|t>>>32-i,r)}function n(e,t,r,a,n,o,c){return i(t&r|~t&a,e,t,n,o,c)}function o(e,t,r,a,n,o,c){return i(t&a|r&~a,e,t,n,o,c)}function c(e,t,r,a,n,o,c){return i(t^r^a,e,t,n,o,c)}function s(e,t,r,a,n,o,c){return i(r^(t|~a),e,t,n,o,c)}function u(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var p="0123456789abcdef".split("");function l(e){for(var t="",r=0;r<4;r++)t+=p[e>>8*r+4&15]+p[e>>8*r&15];return t}function _(e){return function(e){for(var t=0;t<e.length;t++)e[t]=l(e[t]);return e.join("")}(function(e){var t,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)a(i,u(e.substring(t-64,t)));e=e.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);n[t>>2]|=128<<(t%4<<3);if(t>55){a(i,n);for(t=0;t<16;t++)n[t]=0}n[14]=8*r;a(i,n);return i}(e))}function d(e,t){return e+t&4294967295}if("5d41402abc4b2a76b9719d911017c592"!=_("hello"))function d(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}if(1===t.length)return 0;var k=t.reduce(function(e,t){return e+t.weight},0),h=_("enhancement_id="+e+"&path="+r),w=0;w=e<2850?parseInt(h[h.length-1],16)%k:parseInt(h.substr(8,8),16)%k;return t.reduce(function(e,t,r){var a=e.sum+1>w;if(e.done)return e;if(a){e.chosenInstructionIdx=r;e.done=!0}else e.sum=e.sum+t.weight;return e},{sum:0}).chosenInstructionIdx}function logHash(){console.log("RS-Hash:","07ca25a71314accb4fc4800f514812bc")}function initializer(e,t,r){var a,i=e();function n(){t(i,r)}i.registerPainter(n);a=function(){window.location.search.indexOf("rs-hash=true")>-1&&logHash();n()},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?a():document.addEventListener("DOMContentLoaded",a)}initializer(makeMiddleware,paint,enhancements);rankscience_loaded=!0}();